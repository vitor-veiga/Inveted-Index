# Makefile para compilar as implementaÃ§Ãµes em C

CC = gcc
CFLAGS = -Wall -Wextra -std=c11 -O2
DEBUG_FLAGS = -g -DDEBUG

# Alvos
all: inverted_index_hash inverted_index

# ImplementaÃ§Ã£o com Hash Table (Recomendada)
inverted_index_hash: inverted_index_hash.c
	$(CC) $(CFLAGS) -o inverted_index_hash inverted_index_hash.c
	@echo "âœ… Compilado: inverted_index_hash"

# ImplementaÃ§Ã£o com Ãrvore BinÃ¡ria
inverted_index: inverted_index.c
	$(CC) $(CFLAGS) -o inverted_index inverted_index.c
	@echo "âœ… Compilado: inverted_index"

# Compilar com debug
debug: CFLAGS += $(DEBUG_FLAGS)
debug: all

# Executar implementaÃ§Ã£o com Hash Table
run_hash: inverted_index_hash
	@echo "\nğŸš€ Executando implementaÃ§Ã£o com Hash Table:\n"
	./inverted_index_hash

# Executar implementaÃ§Ã£o com Ãrvore BinÃ¡ria
run_tree: inverted_index
	@echo "\nğŸš€ Executando implementaÃ§Ã£o com Ãrvore BinÃ¡ria:\n"
	@if [ -f ../test_data/test_data.txt ]; then \
		./inverted_index < ../test_data/test_data.txt; \
	else \
		echo "âš ï¸  Arquivo test_data.txt nÃ£o encontrado!"; \
	fi

# Executar ambas
run_all: run_hash run_tree

# Limpar arquivos compilados
clean:
	rm -f inverted_index_hash inverted_index
	@echo "ğŸ§¹ Arquivos compilados removidos"

# Ajuda
help:
	@echo "ğŸ“– Comandos disponÃ­veis:"
	@echo "  make              - Compila ambas implementaÃ§Ãµes"
	@echo "  make run_hash     - Compila e executa Hash Table"
	@echo "  make run_tree     - Compila e executa Ãrvore BinÃ¡ria"
	@echo "  make run_all      - Executa ambas implementaÃ§Ãµes"
	@echo "  make debug        - Compila com sÃ­mbolos de debug"
	@echo "  make clean        - Remove arquivos compilados"
	@echo "  make help         - Mostra esta ajuda"

.PHONY: all debug run_hash run_tree run_all clean help
